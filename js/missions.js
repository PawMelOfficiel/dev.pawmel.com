const missions = [
    {
        client: "GoPetSit",
        client_name: "Lucie Sandré",
        client_job_title: "Fondatrice",
        client_job_title_en: "Founder",
        job_title: "Développeuse Full-Stack",
        job_title_en: "Full-Stack Developer",
        start_date: "2025-07-08",
        end_date: "2025-07-31",
        link: "https://www.gopetsit.com",
        image: "/assets/GPS-logo.png",
        content: `<p>Pour la plateforme de pet-sitting GoPetSit, j’ai conçu et mis en place :</p>
                <ul>
                    <li>🔁 Système complet d’abonnements Stripe : création, gestion, résiliation, synchronisation via webhooks, activation automatique de fonctionnalités selon le statut d’abonnement, période d’essai configurable.</li>
                    <li>🛒 Vente de modules d’accompagnement : panier multi-produits, gestion des promotions, codes promo dynamiques, réductions automatiques, livraison sécurisée des contenus (PDF avec tokens), emails transactionnels.</li>
                    <li>📊 Admin dashboard personnalisé : suivi des ventes, gestion des utilisateurs, contrôle total sur les abonnements et les modules.</li>
                    <li>📈 Optimisation marketing & SEO : configuration de Google Tag Manager, synchronisation des contacts avec Brevo (ex-Sendinblue), indexation du site via Google Search Console.</li>
                </ul>`,
        content_en: `<p>For the GoPetSit pet-sitting platform, I designed and implemented:</p>
                <ul>
                    <li>🔁 Full Stripe subscription system: creation, management, cancellation, synchronization via webhooks, automatic feature activation based on subscription status, configurable trial period.</li>
                    <li>🛒 Sale of training modules: multi-product cart, promotion management, dynamic promo codes, automatic discounts, secure delivery of content (PDFs with tokens), transactional emails.</li>
                    <li>📊 Custom admin dashboard: sales tracking, user management, full control over subscriptions and modules.</li>
                    <li>📈 Marketing & SEO optimization: Google Tag Manager setup, contact synchronization with Brevo (formerly Sendinblue), site indexing via Google Search Console.</li>
                </ul>`,
        review: `<p>J’ai eu le plaisir de travailler avec Clémence durant tout le mois de juillet sur le développement technique de GoPetSit.</p>
                <p>Elle a mis en place un système complet de gestion des abonnements, un back-office administrable pour les modules d’accompagnement, l’intégration du panier avec remises et codes promo, ainsi que le paramétrage du tracking SEO (Search Console, Tag Manager, etc.).</p>
                <p>Son travail a été fluide, rigoureux, livré à temps et toujours orienté utilisateur. Je recommande Clémence sans aucune hésitation !</p>`,
        review_en: `<p>I had the pleasure of working with Clémence throughout the month of July on the technical development of GoPetSit.</p>
                <p>She implemented a complete subscription management system, an admin back-office for support modules, cart integration with discounts and promo codes, as well as SEO tracking setup (Search Console, Tag Manager, etc.).</p>
                <p>Her work was smooth, thorough, delivered on time, and always user-focused. I recommend Clémence without hesitation!</p>`,
        tech_stack: [
            "Symfony",
            "Doctrine",
            "Twig",
            "PHP",
            "JavaScript",
            "MySQL",
            "Tailwind CSS",
            "Stripe",
            "Brevo",
            "Google Search Console",
            "Google Tag Manager"
        ],
    },
    {
        client: "GoPetSit",
        client_name: "Lucie Sandré",
        client_job_title: "Fondatrice",
        client_job_title_en: "Founder",
        job_title: "Cheffe de Projet Informatique",
        job_title_en: "IT Project Manager",
        start_date: "2025-08-01",
        end_date: "2025-08-20",
        link: "https://www.gopetsit.com",
        image: "/assets/GPS-logo.png",
        content: `<p class="font-semibold">🛠️ Astreinte Technique & Coordination</p>

                <p>Durant le mois d’août, j’ai assuré une astreinte technique afin de garantir la continuité
                des services et le bon fonctionnement des systèmes en production, tout en coordonnant
                les interventions ponctuelles de prestataires ou collaborateurs externes.</p>

                <p>Mes responsabilités incluaient :</p>
                <ul>
                    <li>🖥️ Supervision de la production et gestion des incidents techniques.</li>
                    <li>🤝🏻 Coordination des actions correctives avec les intervenants externes.</li>
                    <li>📫 Suivi des tickets, priorisation et maintien de la qualité de service.</li>
                    <li>🗣️ Communication avec les parties prenantes pour assurer la continuité du projet.</li>
                    <li>👩🏻‍💻 Réalisation ponctuelle de tâches techniques ou fonctionnelles selon les besoins.</li>
                </ul>
                <p>Un rôle à la croisée de l’opérationnel et du pilotage, en autonomie, garantissant la stabilité du système pendant la période estivale.</p>`,
        content_en: `<p class="font-semibold">🛠️ Technical On-Call & Coordination</p>

                <p>During the month of August, I provided technical on-call support to ensure service
                continuity and the proper functioning of production systems, while coordinating one-off interventions by external providers or collaborators.</p>

                <p>My responsibilities included:</p>
                <ul>
                    <li>🖥️ Production monitoring and technical incident management.</li>
                    <li>🤝🏻 Coordination of corrective actions with external stakeholders.</li>
                    <li>📫 Ticket tracking, prioritization, and maintaining service quality.</li>
                    <li>🗣️ Communication with stakeholders to ensure project continuity.</li>
                    <li>👩🏻‍💻 Occasional execution of technical or functional tasks as needed.</li>
                </ul>
                <p>A role at the intersection of operations and project management, carried out independently, ensuring system stability during the summer period.</p>`,
        review: `<p>Depuis août, Clémence occupe un rôle central dans le suivi technique et l’amélioration continue du site GoPetSit.</p>
                <p>Elle intervient avec efficacité sur les bugs remontés, propose des solutions rapidement et s’investit avec sérieux dans la résolution comme dans la prévention des problèmes.</p>
                <p>C’est également elle qui supervise désormais les futures améliorations fonctionnelles, avec une vraie posture de cheffe de projet : à l’écoute, réactive, disponible, toujours force de proposition.</p>
                <p>Un vrai pilier pour le bon fonctionnement du site ! Je la recommande sans hésiter 🐾</p>`,
        review_en: `<p>Since August, Clémence has played a central role in the technical monitoring and continuous improvement of the GoPetSit website.</p>
                <p> She efficiently handles reported bugs, quickly proposes solutions, and is seriously committed to both solving and preventing issues.</p>
                <p>She now also supervises future functional improvements, with a true project manager mindset: attentive, responsive, available, and always proactive.</p>
                <p>A true pillar for the smooth operation of the site! I highly recommend her 🐾</p>`,
        tech_stack: [
            "Symfony",
            "Doctrine",
            "Twig",
            "PHP",
            "JavaScript",
            "MySQL",
            "Tailwind CSS"
        ],
    },
    {
        client: "GoPetSit",
        client_name: "Lucie Sandré",
        client_job_title: "Fondatrice",
        client_job_title_en: "Founder",
        job_title: "Cheffe de Projet Informatique",
        job_title_en: "IT Project Manager",
        start_date: "2025-08-21",
        end_date: "2025-08-31",
        link: "https://www.gopetsit.com",
        image: "/assets/GPS-logo.png",
        content: `<p class="font-semibold">✨ Développement & Optimisation de la plateforme</p>

                <p>Durant le restant du mois d’août, j’ai poursuivi ma mission en tant que Cheffe de Projet Informatique pour la plateforme GoPetSit.</p>

                <p>Mes responsabilités incluaient :</p>
                <ul>
                    <li>🚀 Refonte complète du site (textes + visuels) et amélioration du design global.</li>
                    <li>🤝🏻 Coordination des intervenants externes et réalisation de reviews pour la mise en production.</li>
                    <li>
                        ⚙️ Développement de nouvelles fonctionnalités, incluant notamment une page de contact avec
                        prise de rendez-vous ou envoi d’email direct, la refonte de la page d’accueil avec un
                        affichage animé des étapes de réservation, une meilleure gestion graphique des erreurs,
                        une optimisation du calcul et de l'affichage des tarifs et une amélioration de
                        l'interface administateur.
                    </li>
                    <li>📞 Support technique et accompagnement des utilisateurs pour la résolution des problèmes rencontrés.</li>
                    <li>🛠️ Astreinte technique et interventions rapides en cas de besoin.</li>
                </ul>
                <p>
                    Un rôle polyvalent, combinant pilotage, conception et assistance, garantissant la fiabilité et la fluidité du
                    service durant une période clé.
                </p>`,
        content_en: `<p class="font-semibold">✨ Platform Development & Optimization</p>

                <p>During the remainder of August, I continued my mission as an IT Project Manager for GoPetSit.</p>

                <p>My responsibilities included:</p>
                <ul>
                    <li>🚀 A complete website redesign (content + visuals) and overall design enhancement.</li>
                    <li>🤝🏻 Coordination with external contributors and performing reviews before production release.</li>
                    <li>
                        ⚙️ Development of new features, including a contact page with appointment booking or direct email,
                        a redesigned homepage with animated reservation steps, improved error handling,
                        optimized pricing calculation and display, and an enhanced admin interface.
                    </li>
                    <li>📞 Technical support and user assistance for troubleshooting issues.</li>
                    <li>🛠️ On-call availability and rapid interventions when needed.</li>
                </ul>
                <p>
                    A versatile role, combining project management, development, and support, ensuring reliability
                    and a smooth user experience during a critical period.
                </p>`,
        review: `<p>Clémence a livré un très gros travail de refonte produit en un temps record : nouveaux textes & visuels,
                page de contact, homepage repensée avec un parcours animé des étapes de réservation, et UX d'erreurs
                beaucoup plus claire. Elle a aussi optimisé le calcul et l’affichage des tarifs, ce qui a réduit les
                incompréhensions côté utilisateur.</p>
                <p>J’apprécie particulièrement sa capacité à coordonner les intervenants et à livrer proprement 
                (tests, détails UI, etc.).</p>
                <p>Une développeuse-cheffe de projet fiable, structurée et orientée expérience utilisateur :
                on gagne en cohérence et en vitesse à chaque itération. Je recommande sans réserve.</p>`,
        review_en: `<p>Clémence delivered an impressive product redesign in record time: new texts & visuals, 
                    a contact page, a completely reimagined homepage with an animated booking flow, and a 
                    much clearer error UX. She also optimized the pricing calculation and display, which reduced
                    user misunderstandings.</p>
                    <p>I particularly appreciate her ability to coordinate contributors and deliver clean work
                    (testing, UI details, etc.).</p>
                    <p>A reliable and structured developer-project manager with a strong user experience focus:
                    each iteration brings more consistency and speed. I wholeheartedly recommend her.</p>`,
        tech_stack: [
            "Symfony",
            "Doctrine",
            "Twig",
            "PHP",
            "JavaScript",
            "MySQL",
            "Tailwind CSS"
        ],
    },
];

function renderMissions() {
    const container = document.querySelector("#missions-container");

    missions.sort((a, b) => new Date(b.start_date) - new Date(a.start_date));

    missions.forEach((mission) => {
        const card = document.createElement("article");
        card.className = "bg-white shadow-md rounded-lg p-6 mb-8 w-full";

        const startDate = path.startsWith("/en")
            ? new Date(mission.start_date).toLocaleDateString("en-UK", {
                year: "numeric",
                month: "long",
                day: "numeric",
            })
            : new Date(mission.start_date).toLocaleDateString("fr-FR", {
                year: "numeric",
                month: "long",
                day: "numeric",
            });
        const endDate = path.startsWith("/en")
            ? new Date(mission.end_date).toLocaleDateString("en-UK", {
                year: "numeric",
                month: "long",
                day: "numeric",
            })
            : new Date(mission.end_date).toLocaleDateString("fr-FR", {
                year: "numeric",
                month: "long",
                day: "numeric",
            });

        card.innerHTML = `
            <div class="flex mb-4 items-center lg:items-center">
                <a href="${mission.link}" target="_blank" rel="noopener" class="shrink-0 mr-4">
                    <img src="${mission.image}" alt="${mission.client} logo" class="h-12 w-12 object-contain" />
                </a>
                <div class="flex flex-col text-left lg:flex-row lg:items-center lg:gap-4">
                    <h2 class="text-xl font-extrabold text-[#2E6E49] font-montserrat leading-none mb-2 lg:mb-0">
                        ${path.startsWith("/en/") ? `${mission.job_title_en}` : `${mission.job_title}`}
                    </h2>
                    <div class="text-l text-[#444444] flex flex-wrap items-center gap-1 mt-1 lg:mt-1">
                        <strong>${mission.client}</strong> |
                                    <span class="text-gray-500">${startDate} - ${endDate}</span>
                        <a href="${mission.link}" target="_blank" rel="noopener" class="text-[#2E6E49] ml-1 inline-flex">
                            <svg class="h-6 w-6 fill-none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <g id="External_Link">
                                    <path id="Vector" d="M10.0002 5H8.2002C7.08009 5 6.51962 5 6.0918 5.21799C5.71547 5.40973 5.40973 5.71547 5.21799 6.0918C5 6.51962 5 7.08009 5 8.2002V15.8002C5 16.9203 5 17.4801 5.21799 17.9079C5.40973 18.2842 5.71547 18.5905 6.0918 18.7822C6.5192 19 7.07899 19 8.19691 19H15.8031C16.921 19 17.48 19 17.9074 18.7822C18.2837 18.5905 18.5905 18.2839 18.7822 17.9076C19 17.4802 19 16.921 19 15.8031V14M20 9V4M20 4H15M20 4L13 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                </g>
                            </svg>
                        </a>
                    </div>
                </div >
            </div >

        <div class="text-sm leading-relaxed text-left mb-4 space-y-2">
            ${path.startsWith("/en/") ? `${mission.content_en}` : `${mission.content}`}
        </div>

        ${(path.startsWith("/en/") && mission.review_en && mission.review_en.trim() !== "") ||
                (!path.startsWith("/en/") && mission.review && mission.review.trim() !== "") ? `
            <div class="mt-6 border-t pt-4 text-left">
                ${mission.client_name && mission.client_name.trim() !== "" ?
                    `<p class="font-bold mb-2">${path.startsWith("/en/") ? `Client review from ${mission.client_name} - ${mission.client_job_title_en} at ${mission.client}:` : `L'avis de ${mission.client_name} - ${mission.client_job_title} ${mission.client} :`}</p>`
                    : `<p class="font-bold mb-2">${path.startsWith("/en/") ? `Client review:` : `L’avis du client :`}</p>`}
                <blockquote class="text-[#2E6E49] italic text-sm space-y-2 mb-2">
                    ${path.startsWith("/en/") ? mission.review_en : mission.review}
                </blockquote>
            </div>
        ` : ""}

    <div class= "flex flex-wrap gap-2 mt-4" >
    ${mission.tech_stack
                .map(
                    (tech) =>
                        `<span class="bg-[#A7C9A1] text-[#444444] text-xs font-semibold px-2 py-1 rounded">${tech}</span>`
                )
                .join("")
            }
        </div >
        `;
        container.appendChild(card);
    });
}

document.addEventListener("DOMContentLoaded", renderMissions);